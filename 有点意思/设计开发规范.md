# 设计开发规范
## 设计资源规范

1. 设计稿规范

设计师应使用幕客上传设计稿，并与前端开发人员及时进行信息同步。推荐使用 Sketch 作为设计稿的文件格式。

| 平台   | 尺寸         | 中心重点区域 |
| ------ | ------------ | ------------ |
| 移动端 | 750 \* 1624  | 646\*1206    |
| PC 端  | 1920 \* 1080 | 1200 \* 768  |

2. 资源格式规范

| 资源          | 格式 | 其他优先级                 | 备注                     |
| ------------- | ---- | -------------------------- | ------------------------ |
| 透明图        | SVG  | SVG、PNG                   | 大图片必须使用 SVG       |
| 不透明图      | SVG  | SVG、JPEG、JPG             | 大图片必须使用 SVG       |
| 字体-版权问题 | WOFF | WOFF、WOFF2、TTF、OTF、SVG | 使用系统字体无需提供资源 |
| 3D 模型       | GLTF | GLTF、OBJ                  | 提供模型相关属性         |

3. 动画规范

在"视界"平台中，动画被视为一种组件，用户可以通过拖拽缩放在页面中展示。因此，为保证清晰度，不再使用 GIF 格式展示大型动画效果，而是使用 SVG 图片开发动画。

| 资源     | 格式 | 其他优先级 | 备注                     |
| -------- | ---- | ---------- | ------------------------ |
| 动画效果 | -    | -          | GIF 效果                 |
| 图片资源 | SVG  | SVG、PNG   | 拆分多个元素提供清晰素材 |
| 动画时间 | -    | -          | 动画时间（秒）           |

<img src="../img/design-img.png" width="300px">

4. 交互设计补充

设计中通常会涉及许多交互效果，但在交付设计稿时很容易遗漏。因此，设计师需要检查设计稿中的交互状态是否已经补充。

| 资源     | 交互效果                   | 备注                           |
| -------- | -------------------------- | ------------------------------ |
| 鼠标交互 | 默认、点击、hover、disable | 根据需求补充不同鼠标交互设计稿 |
| 省缺状态 | 无数据展示                 | 如：无数据、请求超时           |
| 加载状态 | loading                    | 请求数据等待阶段               |

5. 注意：

设计稿如提供中国地图素材，必须保证中国地图的完整性。
## 问题现状

1. 设计稿尺寸不统一：设计师给到重构同学的设计稿尺寸不统一。
2. 设计稿频繁改动尺寸：为了实现高度设计还原，手机适配，开发效率常常会麻烦设计师修改尺寸：
3. 设计稿分辨率未兼容：不同设计稿在不同分辨率下效果展示不同。

## 问题原因
1. 设计尺寸规范未统一
2. 设计稿未考虑兼容性
3. 设计先行，开发设计未对齐

## 市场分辨率占比

### 安卓手机市场分辨率占比
|分辨率         |市场占比 |750对应设计稿高度 |
| ------------- | --------- | ---------------------- |
| 360x640     | 48.05     | 1333                  		|
| 414x736     | 19.28     | 1333 						|
| 375x667     | 17.48     | 1334 						|
| 320x568     | 2.34       | 1331 						 |
| 1920x1080 |2.19        | 421 							|
| 393x699     |1.26        | 1333						 |
| 412x732     |1.11        | 1332						 |
| 其它            |8.29        |                    			   |

### ios分辨率手机占比

  |iphone 尺寸 |市场份额 |750对应高度 |
	| ------------- | --------- | ---------------------- |
  |828×1792 |24.3 |1623 |
  |1125×2436 |20.58 |1624 |
  |1242×2208 |18.65 |1333 |
  |750×1334 |13.23 |1334 |
  |1242×2688 |11.28 |1623 |
  |1125×2001 |2.4 |1334 |
  |2048×1536 |2.22 |562 |
  |1536×2048 |2.05 |1000 |
  |750×1624 |1.79 |1624 |
  |640×1136 |1.5 |1331 |
  |2224×1668 |0.47 |562 |
  |1334×750 |0.35 |421 |
  
### pc端分辨率市场份额占比
  |pc分辨率 |市场占比 |
  | ---------- | --------- | 
  |1920x1080 |45.1 |
  |1366x768 |9.74 |
  |1440x900 |7.89 |
  |1536x864 |7.65 |
  |1600x900 |5.78 |
  |1280x720 |4.49 |
  |1024x768 |3.07 |
  |其它 |16.28 |


## 设计稿尺寸推荐
### 小程序推荐设计稿尺寸：750*1334
微信小程序的设计只需以iphone6屏幕尺寸750x1334px为视觉个进行设计即可，因为微信小程序以rpx为css尺寸单位，rpx可以根据屏幕宽度进行自适应，规定屏幕宽度为750px，因此在iphone6设计稿上1px=1rpx，在尺寸换算上就会很简单。

### h5推荐设计稿尺寸：750*1624
移动端设计稿推荐设计尺寸：750x1624px，重要内容在安全区域内：646x1206px. 移动端的首屏尤为重要，很多时候用户只关注到首屏的内容。

### pc推荐设计稿尺寸：1920*1080
web端基准尺寸：1920*1080px分两种形式
- 一种是以1920px全宽尺寸进行设计（常见于个性化网页设计）
- 一种是内容控制在以1200px为宽度尺寸的安全范围内进行设计。

## 自适应规范

## 兼容性设计避坑

第一：背景图片必须采用background-size:cover;来实现。

第二：我们在进行H5页面内容规划布局设计的时候，不能把重要内容放在太偏下的位置或者偏上，否则前端布局时可能出现内容显示不全的情况。

- 图标最小尺寸：由于我们的拇指有一定的大小，所以图标的大小必须要让拇指有效点击，最小尺寸不能小于：48*48
- 图标和旁边元素最小间距：为了不误触图标旁边的元素，图标与周围应保持一定的距离，间距为：8dp。
- 在一些极端情况，允许可点击范围小于 48*48dp，例如： 文章中的链接、日期选择器。

全屏设计需添加状态栏查看效果；

- 提取属性、组件特性：
- 1、标准色
2、标准字
3、图标
4、 按钮
5、公共控件
6、模块
7、布局

### ios

### androids

### 小程序
- 预留菜单位置：小程序的“所有页面”右上角位置，都固定放置了小程序的菜单，在设计界面时需预留出该区域空间。

### 字体资源

- 提供字体资源格式的优先级如下：WOFF、WOFF2、TTF、OTF、SVG
- 如果使用系统默认字体，则按以下优先级展示字体。如有调整，请特别说明：

```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue',
  'system-ui', sans-serif;
```

系统字体的优先级如下：

1. -apple-system：适用于苹果设备，使用苹果系统默认字体。
2. BlinkMacSystemFont：适用于 Mac 设备上的 Blink 渲染引擎，使用系统默认字体。
3. "Segoe UI"：适用于 Windows 系统，使用 Segoe UI 字体，这是 Windows 系统上常用的无衬线字体。
4. Roboto：一种开源无衬线字体，常用于 Android 系统。
5. Oxygen-Sans：

Linux 系统中常用的无衬线字体。 6. Ubuntu：Ubuntu 系统中常用的无衬线字体。 7. Cantarell：GNOME 桌面环境中常用的无衬线字体。 8. "Helvetica Neue"：一种广泛使用的无衬线字体。 9. "system-ui"是一种通用的字体关键字，它会根据用户的操作系统和设备选择适当的默认字体。它可以用作回退选项，以确保字体的一致性和良好的可读性。 10. sans-serif：如果上述字体都不可用，则回退到浏览器默认的无衬线字体。

## 3D 模型规范

前端开发无法将设计工具中的设计效果完全还原到 three.js 开发框架中。因为设计稿渲染出的 3d 效果是设计工具自带的渲染器生成的，所以 threejs 是无法使用该渲染器。

如设计工具有条件导出 three.js 开发资源时，设计师还需要提供详细的开发调用说明教程，以确保开发人员能够正确地使用和呈现设计效果。

<img src="../img/threejs-export.jpeg" width="300px">

### 模型导出格式：GLTF、OBJ

设计师应使用设计工具导出模型为 GLTF 或 OBJ 格式。由于设计模型的文件体积通常较大，前端开发必须使用在线调整工具进行优化：[https://threejs.org/editor/](https://threejs.org/editor/)

<img src="../img/threejs-editor.png" width="300px">

在该工具中，导入模型后，选择具有交互效果的子模型，并修改其名称和位置。如果整体模型过大，可以先进行缩放后再导出。模型的缩放不会影响视觉效果，但有助于提高网络资源加载速度。

### 模型属性：材质、颜色、贴图

由于模型的实际效果受光照影响，视觉上的颜色与模型的实际颜色可能不同。

为了有效还原 3D 视觉效果，设计师应提供以下属性信息（包括但不限于）：

| 名称     | 材质                 | 实际颜色（hex） | 位置 (x, y, z) |
| -------- | -------------------- | --------------- | -------------- |
| 环境光   | -                    | #fff            | -              |
| 点光源   | -                    | #12a7ff         | 1, 42, 2       |
| 内部模型 | MeshStandardMaterial | #0665d5         | 12, 24, 21     |

请提供光照名称、颜色、材质以及模型的位置信息。有助于确保 three.js 开发中能够更好地还原设计效果。

### 模型完整性

设计师若提供模型，应当保证模型完整性。

反面案例：3d 地图不同省份区域需要做颜替换，子模型没有通过命名来区分。其次提供的中国地图并不完整。设计稿中的 3d 地图区域有描边，但提供的模型并没有存在描边，致使开发难度提高。

<img src="../img/threejs-map.png" width="300px">

### 注意

1. 3d模型渲染后的图片，不允许二次添加滤镜。

前端无法配置滤镜加工过的效果。

2. 减少大型发光效果的模型

前端程序一定是无法 100%还原度。因为设计稿渲染出的 3d 效果是设计工具自带的渲染器生成的，所以“发光”的效果在 threejs 框架中，需要编写额外的着色器，同时程序开发后的发光效果一定是无法与设计稿保持一致，只能做到最大化还原。
